/*! 
 * angular-loading-bar v0.3.0
 * https://chieffancypants.github.io/angular-loading-bar
 * Copyright (c) 2014 Wes Cruver
 * License: MIT
 */
(function(){"use strict";angular.module("angular-loading-bar",["chieffancypants.loadingBar"]);angular.module("chieffancypants.loadingBar",[]).config(["$httpProvider",function(n){var t=["$q","$cacheFactory","$timeout","$rootScope","cfpLoadingBar",function(t,i,r,u,f){function c(){r.cancel(h);f.complete();o=0;e=0}function s(t){var u,f=n.defaults,r;return t.method!=="GET"||t.cache===!1?(t.cached=!1,!1):(u=t.cache===!0&&f.cache===undefined?i.get("$http"):f.cache!==undefined?f.cache:t.cache,r=u!==undefined?u.get(t.url)!==undefined:!1,t.cached!==undefined&&r!==t.cached)?t.cached:(t.cached=r,r)}var e=0,o=0,l=f.latencyThreshold,h;return{request:function(n){return n.ignoreLoadingBar||s(n)||(u.$broadcast("cfpLoadingBar:loading",{url:n.url}),e===0&&(h=r(function(){f.start()},l)),e++,f.set(o/e)),n},response:function(n){return s(n.config)||(o++,u.$broadcast("cfpLoadingBar:loaded",{url:n.config.url}),o>=e?c():f.set(o/e)),n},responseError:function(n){return s(n.config)||(o++,u.$broadcast("cfpLoadingBar:loaded",{url:n.config.url}),o>=e?c():f.set(o/e)),t.reject(n)}}}];n.interceptors.push(t)}]).provider("cfpLoadingBar",function(){this.includeSpinner=!0;this.includeBar=!0;this.latencyThreshold=100;this.parentSelector="body";this.$get=["$document","$timeout","$rootScope",function(n,t,i){function b(){(t.cancel(l),r)||(i.$broadcast("cfpLoadingBar:started"),r=!0,w&&s.append(e),p&&s.append(h),u(.02))}function u(n){if(r){var i=n*100+"%";y.css("width",i);o=n;t.cancel(c);c=t(function(){a()},250)}}function a(){var t,n,i;f()>=1||(t=0,n=f(),t=n>=0&&n<.25?(Math.random()*3+3)/100:n>=.25&&n<.65?Math.random()*3/100:n>=.65&&n<.9?Math.random()/50:n>=.9&&n<.99?.005:0,i=f()+t,u(i))}function f(){return o}function k(){i.$broadcast("cfpLoadingBar:completed");u(1);l=t(function(){e.remove();h.remove();o=0;r=!1},500)}var v=this.parentSelector,s=n.find(v),e=angular.element('<div id="loading-bar"><div class="bar"><div class="peg"><\/div><\/div><\/div>'),y=e.find("div").eq(0),h=angular.element('<div id="loading-bar-spinner"><div class="spinner-icon"><\/div><\/div>'),c,l,r=!1,o=0,p=this.includeSpinner,w=this.includeBar;return{start:b,set:u,status:f,inc:a,complete:k,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector}}]})})();