"use strict";(function(){this.register("LoginController",["$scope","$rootScope","$dialog","$location","$routeParams","LoginService",b]);this.register("DialogPasswordLost",["$scope","$rootScope","dialog","LoginService",a]);function b(e,c,g,h,f,d){e.user={};c.error=null;e.connect=function(i){var j=false;if(!i.email||i.email==""){e.login.email.$setViewValue("")}if(!i.pwd||i.pwd==""){e.login.password.$setViewValue("")}if(e.login.$invalid){return}d.login(i.email,i.pwd,{keep:i.keep},function(k){if(!k){e.user={};e.login.$setPristine();c.connected=false;c.error=true;return}c.initConnected(k)})};e.opts={backdrop:true,keyboard:true,backdropClick:true,templateUrl:"/templates/passwordLost.html",controller:"DialogPasswordLost"};e.passwordLost=function(i,j){c.error="";var k=angular.copy(e.opts);if(i){k.email=i}if(j){k.key=j}var l=g.dialog(k);l.open().then(function(m){if(m){}})};if(location.pathname.indexOf("lost")>-1&&f.email&&f.key){e.passwordLost(f.email,f.key)}}function a(e,c,f,d){c.error="";e.enable=true;e.password={etat:0};if(f.options.email){e.password.email=f.options.email;if(f.options.key){e.password.key=f.options.key;e.password.etat=1}}e.close=function(){c.error="";f.close()};e.save=function(g){if(e.pwdLost.$invalid){return}c.error="";e.enable=false;d.passwordLost(g).then(function(h){e.enable=true;if(h&&g.etat==2){f.close();c.initConnected(h)}},function(h){e.enable=true})}}}).call(app.controllerProvider);