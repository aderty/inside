"use strict";(function(){function n(n,t,i,r){n.user={};t.error=null;n.connect=function(i){(i.email&&i.email!=""||n.login.email.$setViewValue(""),i.pwd&&i.pwd!=""||n.login.password.$setViewValue(""),n.login.$invalid)||r.login(i.email,i.pwd,{keep:i.keep},function(i){if(!i){n.user={};n.login.$setPristine();t.connected=!1;t.error=!0;return}t.initConnected(i)})};n.opts={backdrop:!0,keyboard:!0,backdropClick:!0,templateUrl:"/templates/passwordLost.html",controller:"DialogPasswordLost"};n.passwordLost=function(){t.error="";var r=i.dialog(n.opts);r.open().then(function(n){n})}}function t(n,t,i,r){t.error="";n.enable=!0;n.password={etat:0};n.close=function(){t.error="";i.close()};n.save=function(u){n.pwdLost.$invalid||(t.error="",n.enable=!1,r.passwordLost(u).then(function(r){n.enable=!0;r&&u.etat==2&&(i.close(),t.initConnected(r))},function(){n.enable=!0}))}}this.register("LoginController",["$scope","$rootScope","$dialog","LoginService",n]);this.register("DialogPasswordLost",["$scope","$rootScope","dialog","LoginService",t])}).call(app.controllerProvider);